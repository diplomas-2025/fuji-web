{"ast":null,"code":"var _jsxFileName = \"/Users/danilabelakov/WebstormProjects/test_progect/my-app/src/App.js\",\n  _s = $RefreshSig$();\nimport React from 'react';\nimport { Route } from 'react-router-dom';\nimport axios from 'axios';\nimport Header from './components/Header';\nimport Drawer from './components/Drawer';\nimport AppContext from './context';\nimport Home from './pages/Home';\nimport Favorites from './pages/Favorites';\nimport Orders from './pages/Orders';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nfunction App() {\n  _s();\n  const [items, setItems] = React.useState([]);\n  const [cartItems, setCartItems] = React.useState([]);\n  const [favorites, setFavorites] = React.useState([]);\n  const [searchValue, setSearchValue] = React.useState('');\n  const [cartOpened, setCartOpened] = React.useState(false);\n  const [isLoading, setIsLoading] = React.useState(true);\n  React.useEffect(() => {\n    async function fetchData() {\n      try {\n        const [cartResponse, favoritesResponse, itemsResponse] = await Promise.all([axios.get('http://localhost:8080/foods/cards'), axios.get('http://localhost:8080/foods/favorites'), axios.get('http://localhost:8080/foods')]);\n        setIsLoading(false);\n        setCartItems(cartResponse.data);\n        setFavorites(favoritesResponse.data);\n        setItems(itemsResponse.data);\n      } catch (error) {\n        alert('Ошибка при запросе данных ;(');\n        console.error(error);\n      }\n    }\n    fetchData();\n  }, []);\n  const onAddToCart = async obj => {\n    try {\n      const findItem = cartItems.find(item => Number(item.parentId) === Number(obj.id));\n      if (findItem) {\n        setCartItems(prev => prev.filter(item => Number(item.parentId) !== Number(obj.id)));\n        await axios.delete(`http://localhost:8080/foods/${findItem.id}/card`);\n      } else {\n        setCartItems(prev => [...prev, obj]);\n        const {\n          data\n        } = await axios.post(`http://localhost:8080/foods/${obj.id}/card`);\n        setCartItems(prev => prev.map(item => {\n          if (item.parentId === data.parentId) {\n            return {\n              ...item,\n              id: data.id\n            };\n          }\n          return item;\n        }));\n      }\n    } catch (error) {\n      alert('Ошибка при добавлении в корзину');\n      console.error(error);\n    }\n  };\n  const onRemoveItem = id => {\n    try {\n      axios.delete(`http://localhost:8080/foods/${id}/favorite`);\n      setCartItems(prev => prev.filter(item => Number(item.id) !== Number(id)));\n    } catch (error) {\n      alert('Ошибка при удалении из корзины');\n      console.error(error);\n    }\n  };\n  const onAddToFavorite = async obj => {\n    try {\n      if (favorites.find(favObj => Number(favObj.id) === Number(obj.id))) {\n        axios.delete(`http://localhost:8080/foods/${obj.id}/favorite`);\n        setFavorites(prev => prev.filter(item => Number(item.id) !== Number(obj.id)));\n      } else {\n        const {\n          data\n        } = await axios.post(`http://localhost:8080/foods/${obj.id}/favorite`, obj);\n        setFavorites(prev => [...prev, data]);\n      }\n    } catch (error) {\n      alert('Не удалось добавить в фавориты');\n      console.error(error);\n    }\n  };\n  const onChangeSearchInput = event => {\n    setSearchValue(event.target.value);\n  };\n  const isItemAdded = id => {\n    return cartItems.some(obj => Number(obj.parentId) === Number(id));\n  };\n  return /*#__PURE__*/_jsxDEV(AppContext.Provider, {\n    value: {\n      items,\n      cartItems,\n      favorites,\n      isItemAdded,\n      onAddToFavorite,\n      onAddToCart,\n      setCartOpened,\n      setCartItems\n    },\n    children: /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"wrapper clear\",\n      children: [/*#__PURE__*/_jsxDEV(Drawer, {\n        items: cartItems,\n        onClose: () => setCartOpened(false),\n        onRemove: onRemoveItem,\n        opened: cartOpened\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 118,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(Header, {\n        onClickCart: () => setCartOpened(true)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 125,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(Route, {\n        path: \"\",\n        exact: true,\n        children: /*#__PURE__*/_jsxDEV(Home, {\n          items: items,\n          cartItems: cartItems,\n          searchValue: searchValue,\n          setSearchValue: setSearchValue,\n          onChangeSearchInput: onChangeSearchInput,\n          onAddToFavorite: onAddToFavorite,\n          onAddToCart: onAddToCart,\n          isLoading: isLoading\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 128,\n          columnNumber: 11\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 127,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(Route, {\n        path: \"favorites\",\n        exact: true,\n        children: /*#__PURE__*/_jsxDEV(Favorites, {}, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 141,\n          columnNumber: 11\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 140,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(Route, {\n        path: \"orders\",\n        exact: true,\n        children: /*#__PURE__*/_jsxDEV(Orders, {}, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 145,\n          columnNumber: 11\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 144,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 117,\n      columnNumber: 7\n    }, this)\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 106,\n    columnNumber: 5\n  }, this);\n}\n_s(App, \"ltmMu8PZKlzN0C1QIR/x2DWHYm0=\");\n_c = App;\nexport default App;\nvar _c;\n$RefreshReg$(_c, \"App\");","map":{"version":3,"names":["React","Route","axios","Header","Drawer","AppContext","Home","Favorites","Orders","jsxDEV","_jsxDEV","App","_s","items","setItems","useState","cartItems","setCartItems","favorites","setFavorites","searchValue","setSearchValue","cartOpened","setCartOpened","isLoading","setIsLoading","useEffect","fetchData","cartResponse","favoritesResponse","itemsResponse","Promise","all","get","data","error","alert","console","onAddToCart","obj","findItem","find","item","Number","parentId","id","prev","filter","delete","post","map","onRemoveItem","onAddToFavorite","favObj","onChangeSearchInput","event","target","value","isItemAdded","some","Provider","children","className","onClose","onRemove","opened","fileName","_jsxFileName","lineNumber","columnNumber","onClickCart","path","exact","_c","$RefreshReg$"],"sources":["/Users/danilabelakov/WebstormProjects/test_progect/my-app/src/App.js"],"sourcesContent":["import React from 'react';\nimport { Route } from 'react-router-dom';\nimport axios from 'axios';\nimport Header from './components/Header';\nimport Drawer from './components/Drawer';\nimport AppContext from './context';\n\nimport Home from './pages/Home';\nimport Favorites from './pages/Favorites';\nimport Orders from './pages/Orders';\n\nfunction App() {\n  const [items, setItems] = React.useState([]);\n  const [cartItems, setCartItems] = React.useState([]);\n  const [favorites, setFavorites] = React.useState([]);\n  const [searchValue, setSearchValue] = React.useState('');\n  const [cartOpened, setCartOpened] = React.useState(false);\n  const [isLoading, setIsLoading] = React.useState(true);\n\n  React.useEffect(() => {\n    async function fetchData() {\n      try {\n        const [cartResponse, favoritesResponse, itemsResponse] = await Promise.all([\n          axios.get('http://localhost:8080/foods/cards'),\n          axios.get('http://localhost:8080/foods/favorites'),\n          axios.get('http://localhost:8080/foods'),\n        ]);\n\n        setIsLoading(false);\n        setCartItems(cartResponse.data);\n        setFavorites(favoritesResponse.data);\n        setItems(itemsResponse.data);\n      } catch (error) {\n        alert('Ошибка при запросе данных ;(');\n        console.error(error);\n      }\n    }\n\n    fetchData();\n  }, []);\n\n  const onAddToCart = async (obj) => {\n    try {\n      const findItem = cartItems.find((item) => Number(item.parentId) === Number(obj.id));\n      if (findItem) {\n        setCartItems((prev) => prev.filter((item) => Number(item.parentId) !== Number(obj.id)));\n        await axios.delete(`http://localhost:8080/foods/${findItem.id}/card`);\n      } else {\n        setCartItems((prev) => [...prev, obj]);\n        const { data } = await axios.post(`http://localhost:8080/foods/${obj.id}/card`);\n        setCartItems((prev) =>\n          prev.map((item) => {\n            if (item.parentId === data.parentId) {\n              return {\n                ...item,\n                id: data.id,\n              };\n            }\n            return item;\n          }),\n        );\n      }\n    } catch (error) {\n      alert('Ошибка при добавлении в корзину');\n      console.error(error);\n    }\n  };\n\n  const onRemoveItem = (id) => {\n    try {\n      axios.delete(`http://localhost:8080/foods/${id}/favorite`);\n      setCartItems((prev) => prev.filter((item) => Number(item.id) !== Number(id)));\n    } catch (error) {\n      alert('Ошибка при удалении из корзины');\n      console.error(error);\n    }\n  };\n\n  const onAddToFavorite = async (obj) => {\n    try {\n      if (favorites.find((favObj) => Number(favObj.id) === Number(obj.id))) {\n        axios.delete(`http://localhost:8080/foods/${obj.id}/favorite`);\n        setFavorites((prev) => prev.filter((item) => Number(item.id) !== Number(obj.id)));\n      } else {\n        const { data } = await axios.post(\n            `http://localhost:8080/foods/${obj.id}/favorite`,\n            obj,\n        );\n        setFavorites((prev) => [...prev, data]);\n      }\n    } catch (error) {\n      alert('Не удалось добавить в фавориты');\n      console.error(error);\n    }\n  };\n\n  const onChangeSearchInput = (event) => {\n    setSearchValue(event.target.value);\n  };\n\n  const isItemAdded = (id) => {\n    return cartItems.some((obj) => Number(obj.parentId) === Number(id));\n  };\n\n  return (\n    <AppContext.Provider\n      value={{\n        items,\n        cartItems,\n        favorites,\n        isItemAdded,\n        onAddToFavorite,\n        onAddToCart,\n        setCartOpened,\n        setCartItems,\n      }}>\n      <div className=\"wrapper clear\">\n        <Drawer\n          items={cartItems}\n          onClose={() => setCartOpened(false)}\n          onRemove={onRemoveItem}\n          opened={cartOpened}\n        />\n\n        <Header onClickCart={() => setCartOpened(true)} />\n\n        <Route path=\"\" exact>\n          <Home\n            items={items}\n            cartItems={cartItems}\n            searchValue={searchValue}\n            setSearchValue={setSearchValue}\n            onChangeSearchInput={onChangeSearchInput}\n            onAddToFavorite={onAddToFavorite}\n            onAddToCart={onAddToCart}\n            isLoading={isLoading}\n          />\n        </Route>\n\n        <Route path=\"favorites\" exact>\n          <Favorites />\n        </Route>\n\n        <Route path=\"orders\" exact>\n          <Orders />\n        </Route>\n      </div>\n    </AppContext.Provider>\n  );\n}\n\nexport default App;\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}