{"ast":null,"code":"var _jsxFileName = \"/Users/danilabelakov/WebstormProjects/test_progect/my-app/src/components/Drawer/index.js\",\n  _s = $RefreshSig$();\nimport React from 'react';\nimport axios from 'axios';\nimport Info from '../Info';\nimport { useCart } from '../../hooks/useCart';\nimport styles from './Drawer.module.scss';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nconst delay = ms => new Promise(resolve => setTimeout(resolve, ms));\nfunction Drawer({\n  onClose,\n  onRemove,\n  items = [],\n  opened\n}) {\n  _s();\n  const {\n    cartItems,\n    setCartItems,\n    totalPrice\n  } = useCart();\n  const [orderId, setOrderId] = React.useState(null);\n  const [isOrderComplete, setIsOrderComplete] = React.useState(false);\n  const [isLoading, setIsLoading] = React.useState(false);\n  const onClickOrder = async () => {\n    try {\n      setIsLoading(true);\n      const {\n        data\n      } = await axios.post('/orders', {\n        items: cartItems\n      });\n      setOrderId(data.id);\n      setIsOrderComplete(true);\n      setCartItems([]);\n      for (let i = 0; i < cartItems.length; i++) {\n        const item = cartItems[i];\n        await axios.delete('/cart/' + item.id);\n        await delay(1000);\n      }\n    } catch (error) {\n      alert('Ошибка при создании заказа :(');\n    }\n    setIsLoading(false);\n  };\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: `${styles.overlay} ${opened ? styles.overlayVisible : ''}`,\n    children: /*#__PURE__*/_jsxDEV(\"div\", {\n      className: styles.drawer,\n      children: [/*#__PURE__*/_jsxDEV(\"h2\", {\n        className: \"d-flex justify-between mb-30\",\n        children: [\"\\u041A\\u043E\\u0440\\u0437\\u0438\\u043D\\u0430 \", /*#__PURE__*/_jsxDEV(\"img\", {\n          onClick: onClose,\n          className: \"cu-p\",\n          src: \"img/btn-remove.svg\",\n          alt: \"Close\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 42,\n          columnNumber: 19\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 41,\n        columnNumber: 9\n      }, this), items.length > 0 ? /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"d-flex flex-column flex\",\n        children: [/*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"items flex\",\n          children: items.map(obj => /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"cartItem d-flex align-center mb-20\",\n            children: [/*#__PURE__*/_jsxDEV(\"div\", {\n              style: {\n                backgroundImage: `url(${obj.image})`\n              },\n              className: \"cartItemImg\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 50,\n              columnNumber: 19\n            }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"mr-20 flex\",\n              children: [/*#__PURE__*/_jsxDEV(\"p\", {\n                className: \"mb-5\",\n                children: obj.title\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 55,\n                columnNumber: 21\n              }, this), /*#__PURE__*/_jsxDEV(\"b\", {\n                children: [obj.price, \" \\u0440\\u0443\\u0431.\"]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 56,\n                columnNumber: 21\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 54,\n              columnNumber: 19\n            }, this), /*#__PURE__*/_jsxDEV(\"img\", {\n              onClick: () => onRemove(obj.id),\n              className: \"removeBtn\",\n              src: \"img/btn-remove.svg\",\n              alt: \"Remove\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 58,\n              columnNumber: 19\n            }, this)]\n          }, obj.id, true, {\n            fileName: _jsxFileName,\n            lineNumber: 49,\n            columnNumber: 17\n          }, this))\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 47,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"cartTotalBlock\",\n          children: [/*#__PURE__*/_jsxDEV(\"ul\", {\n            children: [/*#__PURE__*/_jsxDEV(\"li\", {\n              children: [/*#__PURE__*/_jsxDEV(\"span\", {\n                children: \"\\u0418\\u0442\\u043E\\u0433\\u043E:\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 70,\n                columnNumber: 19\n              }, this), /*#__PURE__*/_jsxDEV(\"div\", {}, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 71,\n                columnNumber: 19\n              }, this), /*#__PURE__*/_jsxDEV(\"b\", {\n                children: [totalPrice, \" \\u0440\\u0443\\u0431. \"]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 72,\n                columnNumber: 19\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 69,\n              columnNumber: 17\n            }, this), /*#__PURE__*/_jsxDEV(\"li\", {\n              children: [/*#__PURE__*/_jsxDEV(\"span\", {\n                children: \"\\u041D\\u0430\\u043B\\u043E\\u0433 5%:\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 75,\n                columnNumber: 19\n              }, this), /*#__PURE__*/_jsxDEV(\"div\", {}, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 76,\n                columnNumber: 19\n              }, this), /*#__PURE__*/_jsxDEV(\"b\", {\n                children: [totalPrice / 100 * 5, \" \\u0440\\u0443\\u0431. \"]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 77,\n                columnNumber: 19\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 74,\n              columnNumber: 17\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 68,\n            columnNumber: 15\n          }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n            disabled: isLoading,\n            onClick: onClickOrder,\n            className: \"greenButton\",\n            children: [\"\\u041E\\u0444\\u043E\\u0440\\u043C\\u0438\\u0442\\u044C \\u0437\\u0430\\u043A\\u0430\\u0437 \", /*#__PURE__*/_jsxDEV(\"img\", {\n              src: \"img/arrow.svg\",\n              alt: \"Arrow\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 81,\n              columnNumber: 32\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 80,\n            columnNumber: 15\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 67,\n          columnNumber: 13\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 46,\n        columnNumber: 11\n      }, this) : /*#__PURE__*/_jsxDEV(Info, {\n        title: isOrderComplete ? 'Заказ оформлен!' : 'Корзина пустая',\n        description: isOrderComplete ? `Ваш заказ #${orderId} скоро будет передан курьерской доставке` : 'Добавьте хотя бы одну пару кроссовок, чтобы сделать заказ.',\n        image: isOrderComplete ? 'img/complete-order.jpg' : 'img/empty-cart.jpg'\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 86,\n        columnNumber: 11\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 40,\n      columnNumber: 7\n    }, this)\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 39,\n    columnNumber: 5\n  }, this);\n}\n_s(Drawer, \"U63HCsyFPtDpOZLgRpzgKtL/uwA=\", false, function () {\n  return [useCart];\n});\n_c = Drawer;\nexport default Drawer;\nvar _c;\n$RefreshReg$(_c, \"Drawer\");","map":{"version":3,"names":["React","axios","Info","useCart","styles","jsxDEV","_jsxDEV","delay","ms","Promise","resolve","setTimeout","Drawer","onClose","onRemove","items","opened","_s","cartItems","setCartItems","totalPrice","orderId","setOrderId","useState","isOrderComplete","setIsOrderComplete","isLoading","setIsLoading","onClickOrder","data","post","id","i","length","item","delete","error","alert","className","overlay","overlayVisible","children","drawer","onClick","src","alt","fileName","_jsxFileName","lineNumber","columnNumber","map","obj","style","backgroundImage","image","title","price","disabled","description","_c","$RefreshReg$"],"sources":["/Users/danilabelakov/WebstormProjects/test_progect/my-app/src/components/Drawer/index.js"],"sourcesContent":["import React from 'react';\nimport axios from 'axios';\n\nimport Info from '../Info';\nimport { useCart } from '../../hooks/useCart';\n\nimport styles from './Drawer.module.scss';\n\nconst delay = (ms) => new Promise((resolve) => setTimeout(resolve, ms));\n\nfunction Drawer({ onClose, onRemove, items = [], opened }) {\n  const { cartItems, setCartItems, totalPrice } = useCart();\n  const [orderId, setOrderId] = React.useState(null);\n  const [isOrderComplete, setIsOrderComplete] = React.useState(false);\n  const [isLoading, setIsLoading] = React.useState(false);\n\n  const onClickOrder = async () => {\n    try {\n      setIsLoading(true);\n      const { data } = await axios.post('/orders', {\n        items: cartItems,\n      });\n      setOrderId(data.id);\n      setIsOrderComplete(true);\n      setCartItems([]);\n\n      for (let i = 0; i < cartItems.length; i++) {\n        const item = cartItems[i];\n        await axios.delete('/cart/' + item.id);\n        await delay(1000);\n      }\n    } catch (error) {\n      alert('Ошибка при создании заказа :(');\n    }\n    setIsLoading(false);\n  };\n\n  return (\n    <div className={`${styles.overlay} ${opened ? styles.overlayVisible : ''}`}>\n      <div className={styles.drawer}>\n        <h2 className=\"d-flex justify-between mb-30\">\n          Корзина <img onClick={onClose} className=\"cu-p\" src=\"img/btn-remove.svg\" alt=\"Close\" />\n        </h2>\n\n        {items.length > 0 ? (\n          <div className=\"d-flex flex-column flex\">\n            <div className=\"items flex\">\n              {items.map((obj) => (\n                <div key={obj.id} className=\"cartItem d-flex align-center mb-20\">\n                  <div\n                    style={{ backgroundImage: `url(${obj.image})` }}\n                    className=\"cartItemImg\"></div>\n\n                  <div className=\"mr-20 flex\">\n                    <p className=\"mb-5\">{obj.title}</p>\n                    <b>{obj.price} руб.</b>\n                  </div>\n                  <img\n                    onClick={() => onRemove(obj.id)}\n                    className=\"removeBtn\"\n                    src=\"img/btn-remove.svg\"\n                    alt=\"Remove\"\n                  />\n                </div>\n              ))}\n            </div>\n            <div className=\"cartTotalBlock\">\n              <ul>\n                <li>\n                  <span>Итого:</span>\n                  <div></div>\n                  <b>{totalPrice} руб. </b>\n                </li>\n                <li>\n                  <span>Налог 5%:</span>\n                  <div></div>\n                  <b>{(totalPrice / 100) * 5} руб. </b>\n                </li>\n              </ul>\n              <button disabled={isLoading} onClick={onClickOrder} className=\"greenButton\">\n                Оформить заказ <img src=\"img/arrow.svg\" alt=\"Arrow\" />\n              </button>\n            </div>\n          </div>\n        ) : (\n          <Info\n            title={isOrderComplete ? 'Заказ оформлен!' : 'Корзина пустая'}\n            description={\n              isOrderComplete\n                ? `Ваш заказ #${orderId} скоро будет передан курьерской доставке`\n                : 'Добавьте хотя бы одну пару кроссовок, чтобы сделать заказ.'\n            }\n            image={isOrderComplete ? 'img/complete-order.jpg' : 'img/empty-cart.jpg'}\n          />\n        )}\n      </div>\n    </div>\n  );\n}\n\nexport default Drawer;\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}